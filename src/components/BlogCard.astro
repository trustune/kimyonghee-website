---
import Badge from './Badge.astro';

interface Props {
  post: {
    title: string;
    slug: string;
    date: string;
    excerpt?: string;
    image?: string;
    category?: string;
    tags?: string[];
  };
  showImage?: boolean;
  showExcerpt?: boolean;
  showTags?: boolean;
}

const {
  post,
  showImage = true,
  showExcerpt = true,
  showTags = true
} = Astro.props;
---

<article
  class="blog-card"
  data-title={post.title.toLowerCase()}
  data-excerpt={(post.excerpt || '').toLowerCase()}
  data-tags={(post.tags || []).join(',').toLowerCase()}
  data-tag-list={(post.tags || []).join(',')}
>
  {showImage && post.image && (
    <div class="blog-card__image">
      <img src={post.image} alt={post.title} />
    </div>
  )}

  <div class="blog-card__content">
    <div class="blog-card__meta">
      <time datetime={post.date}>
        {new Date(post.date).toLocaleDateString('en-US', {
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        })}
      </time>
      {post.category && (
        <Badge variant="category" text={post.category} size="small" />
      )}
    </div>

    <h2 class="blog-card__title">
      <a href={`/blog/${post.slug}`}>{post.title}</a>
    </h2>

    {showExcerpt && post.excerpt && (
      <p class="blog-card__excerpt">{post.excerpt}</p>
    )}

    {showTags && post.tags && post.tags.length > 0 && (
      <div class="blog-card__tags">
        {post.tags.map(tag => (
          <Badge variant="tag" text={tag} size="small" />
        ))}
      </div>
    )}
  </div>
</article>

<style>
  .blog-card {
    display: flex;
    flex-direction: column;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    overflow: hidden;
    background: white;
    transition: all 0.2s;
  }

  .blog-card:hover {
    border-color: #2563eb;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    transform: translateY(-2px);
  }

  .blog-card__image {
    width: 100%;
    height: 200px;
    overflow: hidden;
  }

  .blog-card__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
  }

  .blog-card:hover .blog-card__image img {
    transform: scale(1.05);
  }

  .blog-card__content {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .blog-card__meta {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.875rem;
    color: #6b7280;
  }

  .blog-card__title {
    font-family: 'Paperozi', 'Inter', sans-serif;
    font-size: 1.5rem;
    font-weight: 600;
    line-height: 1.3;
    margin: 0;
  }

  .blog-card__title a {
    color: #1f2937;
    text-decoration: none;
    transition: color 0.2s;
  }

  .blog-card__title a:hover {
    color: #2563eb;
  }

  .blog-card__excerpt {
    font-size: 0.9375rem;
    color: #6b7280;
    line-height: 1.6;
    margin: 0;
  }

  .blog-card__tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
</style>
